<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <script src="script.js" defer></script>
    <script src="Animacao.js" defer></script>
    <script src="Bola.js" defer></script>
    <script src="teclado.js" defer></script>
    <script src="heroi.js" defer></script>
    <title>Cap. 3</title>
</head>

<body>
    <div class="min">
        <div class="titulo">Capítulo 3</div>
        <div class="center">
            <canvas id="canvas1" width="360" height="200">
                Seu navegador não suporta canvas
            </canvas>
        </div>

        <p class="paragraph">Melhorando o exemplo anterior...</p>
        <div class="center">
            <canvas id="canvas2" width="360" height="200">
                Seu navegador não suporta canvas
            </canvas>
        </div>
    </div>
    <script>
        // const canvas = document.querySelector('#canvas1')
        // const ctx = canvas.getContext('2d')

        // let x = 130
        // let tam = 20

        // desenharPersonagem()

        // document.addEventListener('keydown', (e) => {
        //     if (e.key == "ArrowLeft") {
        //         if (x <= 0) return
        //         x -= 10
        //     } else if (e.key == "ArrowRight") {
        //         if (x >= canvas.width - tam) return
        //         x += 10
        //     }

        //     desenharPersonagem()
        // })

        // function desenharPersonagem() {
        //     ctx.clearRect(0, 0, canvas.width, canvas.height)
        //     ctx.fillRect(x, 100, tam, 20)
        // }

        // Melhorando o exemplo anterior

        const canvas2 = document.querySelector('#canvas2')
        const ctx2 = canvas2.getContext('2d')

        let teclado = new Teclado(document)
        let animacao = new Animacao(ctx2)
        let heroi = new Heroi(ctx2, teclado)
        heroi.x = 0
        heroi.y = 0

        animacao.novoSprite(heroi)
        teclado.disparou(espaco)
        animacao.ligar()

        let pos = 0
        let tam2 = 20

        desenharPersonagem2()

        requestAnimationFrame(animar)
        function animar() {
            if (teclado.pressionada("ArrowLeft")) {
                pos -= 10
            } else if (teclado.pressionada("ArrowRight")) {
                pos += 10
            }

            desenharPersonagem2()
            requestAnimationFrame(animar)
        }

        function desenharPersonagem2() {
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height)
            ctx2.fillRect(pos, 80, tam2, 50)
        }

        // parte 2

        teclado.disparou(espaco)
    </script>

</body>

</html>